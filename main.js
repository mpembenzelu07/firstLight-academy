// Language data
const translations = {
  en: {
    // Navigation
    home: "Home",
    about: "About Us",
    programs: "Programs",
    facilities: "Facilities",
    coaches: "Coaches",
    schedule: "Schedule",
    register: "Register Now",
    
    // Hero Section
    heroTitle: "FirstLight <span>Football Academy</span>",
    heroSubtitle: "Professional youth football development in Dar es Salaam. Elite training for U6, U10, U14, and U17 age groups with certified coaches at DYCCC Yemen Grounds.",
    joinToday: "Join Academy Today",
    viewPrograms: "View Programs",
    ageGroups: "Age Groups",
    weeklySessions: "Weekly Sessions",
    coaches: "Coaches",
    professional: "Professional",
    
    // Features
    whyChoose: "Why Choose <span>FirstLight Academy</span>",
    expertCoaching: "Expert Coaching",
    coachesDesc: "CAF licensed coaches with professional experience and modern training methodologies.",
    modernFacilities: "Modern Facilities",
    facilitiesDesc: "Professional-grade facilities at DYCCC Yemen Grounds with the latest equipment.",
    holisticDevelopment: "Holistic Development",
    developmentDesc: "Focus on technical skills, tactical understanding, physical fitness, and character building.",
    progressivePathway: "Progressive Pathway",
    pathwayDesc: "Clear development pathway from beginner to competitive youth football.",
    
    // Age Groups
    ourAgeGroups: "Our <span>Age Groups</span>",
    tailoredPrograms: "Tailored training programs for each developmental stage",
    u6Badge: "U6 Little Stars",
    u6Title: "Introduction to Football",
    u6Desc: "Fun-based learning focusing on basic motor skills, ball familiarity, and social development.",
    u10Badge: "U10 Development",
    u10Title: "Skill Foundation",
    u10Desc: "Building fundamental techniques, introducing basic tactics, and developing game intelligence.",
    u14Badge: "U14 Elite",
    u14Title: "Advanced Development",
    u14Desc: "Advanced technical training, tactical sophistication, and competitive match experience.",
    u17Badge: "U17 Pro",
    u17Title: "Professional Pathway",
    u17Desc: "High-performance training focused on professional development and competitive excellence.",
    
    // CTA
    startJourney: "Start Your Football Journey Today",
    ctaDesc: "Join Tanzania's premier youth football academy and develop your skills with professional coaches.",
    contactUs: "Contact Us",
    
    // Footer
    footerDesc: "Professional youth football academy in Dar es Salaam, developing the next generation of Tanzanian football talent.",
    quickLinks: "Quick Links",
    contactInfo: "Contact Info",
    trainingInfo: "Training Info",
    location: "DYCCC Yemen Grounds, Chang'ombe",
    phone: "+255 629 384 806",
    email: "info@firstlightacademy.co.tz",
    hours: "Sat-Sun: 15:30-17:30",
    copyright: "&copy; 2024 FirstLight Football Academy. All rights reserved.",
    developed: "Developing Tanzanian Football Talent",
    
    // About Page
    aboutTitle: "About <span>FirstLight Academy</span>",
    aboutSubtitle: "Professional youth football development since 2020",
    missionTitle: "Our Mission",
    missionDesc: "To develop talented young footballers through professional coaching, modern facilities, and a holistic development approach.",
    visionTitle: "Our Vision",
    visionDesc: "To become Tanzania's leading youth football academy, producing professional players and responsible citizens.",
    valuesTitle: "Our Values",
    valuesDesc: "Excellence, Discipline, Teamwork, Respect, and Continuous Improvement.",
    historyTitle: "Our Story",
    historyDesc: "Founded in 2020 by former professional players and certified coaches, FirstLight Academy has grown to become one of Dar es Salaam's most respected youth football programs.",
    
    // Programs Page
    programsTitle: "Training <span>Programs</span>",
    programsSubtitle: "Comprehensive development programs for all age groups",
    
    // Facilities Page
    facilitiesTitle: "Our <span>Facilities</span>",
    facilitiesSubtitle: "Professional training environment",
    
    // Coaches Page
    coachesTitle: "Our <span>Coaching Team</span>",
    coachesSubtitle: "Certified professionals dedicated to youth development",
    
    // Schedule Page
    scheduleTitle: "Training <span>Schedule & Pricing</span>",
    scheduleSubtitle: "Professional training programs at affordable rates",
    
    // Contact Page
    contactTitle: "Contact & <span>Registration</span>",
    contactSubtitle: "Join FirstLight Academy today",
    getInTouch: "Get In Touch",
    sendMessage: "Send Message",
    name: "Full Name",
    email: "Email Address",
    phone: "Phone Number",
    ageGroup: "Age Group",
    message: "Your Message",
    selectAge: "Select Age Group",
    u6: "U6 (4-6 years)",
    u10: "U10 (7-10 years)",
    u14: "U14 (11-14 years)",
    u17: "U17 (15-17 years)",
    submit: "Submit Registration"
  },
  sw: {
    // Navigation
    home: "Nyumbani",
    about: "Kuhusu Sisi",
    programs: "Mipango",
    facilities: "Vifaa",
    coaches: "Makocha",
    schedule: "Ratiba",
    register: "Jiandikishe Sasa",
    
    // Hero Section
    heroTitle: "FirstLight <span>Football Academy</span>",
    heroSubtitle: "Ukuzaji wa kitaalamu wa mpira wa miguu kwa vijana Dar es Salaam. Mafunzo ya hali ya juu kwa makundi ya umri ya U6, U10, U14, na U17 na makocha wenye cheti kwenye Uwanja wa DYCCC Yemen.",
    joinToday: "Jiunge Leo",
    viewPrograms: "Angalia Mipango",
    ageGroups: "Makundi ya Umri",
    weeklySessions: "Mazoezi ya Wiki",
    coaches: "Makocha",
    professional: "Kitaalamu",
    
    // Features
    whyChoose: "Kwa Nini <span>FirstLight Academy</span>",
    expertCoaching: "Ufundishaji wa Kitaalamu",
    coachesDesc: "Makocha wenye leseni ya CAF na uzoefu wa kitaalamu na mbinu za kisasa za mafunzo.",
    modernFacilities: "Vifaa Vya Kisasa",
    facilitiesDesc: "Vifaa vya kitaalamu kwenye Uwanja wa DYCCC Yemen na vifaa vya kisasa.",
    holisticDevelopment: "Ukuzaji Kamili",
    developmentDesc: "Kuzingatia ujuzi wa kiufundi, uelewa wa mkakati, usawa wa kimwili, na ujenzi wa tabia.",
    progressivePathway: "Njia ya Maendeleo",
    pathwayDesc: "Njia wazi ya ukuzaji kutoka kwa mwanzo hadi mpira wa miguu wa vijana wa ushindani.",
    
    // Age Groups
    ourAgeGroups: "Makundi Yetu ya <span>Umri</span>",
    tailoredPrograms: "Mipango maalum ya mafunzo kwa kila hatua ya ukuzaji",
    u6Badge: "Nyota Wadogo U6",
    u6Title: "Utangulizi wa Mpira wa Miguu",
    u6Desc: "Kujifunza kwa msingi wa furaha kuzingatia ujuzi wa msingi wa mwendo, uzoefu wa mpira, na ukuzaji wa kijamii.",
    u10Badge: "Ukuzaji U10",
    u10Title: "Msingi wa Ujuzi",
    u10Desc: "Kujenga mbinu za msingi, kuanzisha mbinu za msingi, na kukuza akili ya mchezo.",
    u14Badge: "Eliti U14",
    u14Title: "Maendeleo ya Juu",
    u14Desc: "Mafunzo ya hali ya juu ya kiufundi, usanifu wa mkakati, na uzoefu wa mechi za ushindani.",
    u17Badge: "U17 Pro",
    u17Title: "Njia ya Kitaalamu",
    u17Desc: "Mafunzo ya utendaji wa hali ya juu yanayolenga ukuzaji wa kitaalamu na ubora wa ushindani.",
    
    // CTA
    startJourney: "Anzisha Safari Yako ya Mpira wa Miguu Leo",
    ctaDesc: "Jiunge na akademi ya vijana ya kipekee ya Tanzania na kujenga ujuzi wako na makocha wa kitaalamu.",
    contactUs: "Wasiliana Nasi",
    
    // Footer
    footerDesc: "Akademia ya kitaalamu ya mpira wa miguu kwa vijana Dar es Salaam, ikikua kizazi kijacho cha vipaji vya mpira wa miguu wa Tanzania.",
    quickLinks: "Viungo vya Haraka",
    contactInfo: "Taarifa za Mawasiliano",
    trainingInfo: "Taarifa za Mafunzo",
    location: "Uwanja wa DYCCC Yemen, Chang'ombe",
    phone: "+255 629 384 806",
    email: "info@firstlightacademy.co.tz",
    hours: "Jumamosi-Jumapili: 15:30-17:30",
    copyright: "&copy; 2024 FirstLight Football Academy. Haki zote zimehifadhiwa.",
    developed: "Kukuza Vipaji vya Mpira wa Miguu wa Tanzania",
    
    // About Page
    aboutTitle: "Kuhusu <span>FirstLight Academy</span>",
    aboutSubtitle: "Ukuzaji wa kitaalamu wa mpira wa miguu wa vijana tangu 2020",
    missionTitle: "Dhamira Yetu",
    missionDesc: "Kukuza wachezaji wachanga wenye vipaji kupitia ufundishaji wa kitaalamu, vifaa vya kisasa, na mbinu kamili ya ukuzaji.",
    visionTitle: "Maono Yetu",
    visionDesc: "Kuwa akademi ya vijana ya mpira wa miguu inayoongoza Tanzania, ikizalisha wachezaji wa kitaalamu na wananchi wenye majukumu.",
    valuesTitle: "Maadili Yetu",
    valuesDesc: "Ubora, Nidhamu, Ushirikiano, Heshima, na Uboreshaji Endelevu.",
    historyTitle: "Hadithi Yetu",
    historyDesc: "Ilianzishwa mwaka 2020 na wachezaji wa zamani wa kitaalamu na makocha wenye cheti, FirstLight Academy imekua na kuwa moja wapo ya programu za heshima zaidi za mpira wa miguu wa vijana Dar es Salaam.",
    
    // Programs Page
    programsTitle: "Mipango ya <span>Mafunzo</span>",
    programsSubtitle: "Mipango kamili ya ukuzaji kwa makundi yote ya umri",
    
    // Facilities Page
    facilitiesTitle: "Vifaa <span>Vyetu</span>",
    facilitiesSubtitle: "Mazingira ya kitaalamu ya mafunzo",
    
    // Coaches Page
    coachesTitle: "Timu Yetu ya <span>Makocha</span>",
    coachesSubtitle: "Wataalamu walioidhinishwa wamejikita kwenye ukuzaji wa vijana",
    
    // Schedule Page
    scheduleTitle: "Ratiba ya <span>Mafunzo & Bei</span>",
    scheduleSubtitle: "Mipango ya kitaalamu ya mafunzo kwa bei nafuu",
    
    // Contact Page
    contactTitle: "Mawasiliano & <span>Usajili</span>",
    contactSubtitle: "Jiunge na FirstLight Academy leo",
    getInTouch: "Wasiliana Nasi",
    sendMessage: "Tuma Ujumbe",
    name: "Jina Kamili",
    email: "Anwani ya Barua pepe",
    phone: "Nambari ya Simu",
    ageGroup: "Kikundi cha Umri",
    message: "Ujumbe Wako",
    selectAge: "Chagua Kikundi cha Umri",
    u6: "U6 (miaka 4-6)",
    u10: "U10 (miaka 7-10)",
    u14: "U14 (miaka 11-14)",
    u17: "U17 (miaka 15-17)",
    submit: "Wasilisha Usajili"
  }
};

// DOM Elements
const mobileMenuBtn = document.getElementById('mobileMenuBtn');
const mobileNav = document.getElementById('mobileNav');
const mobileNavClose = document.getElementById('mobileNavClose');
const languageBtn = document.getElementById('languageBtn');
const mobileLanguageBtn = document.getElementById('mobileLanguageBtn');
const languageDropdown = document.getElementById('languageDropdown');
const mobileLanguageDropdown = document.getElementById('mobileLanguageDropdown');
const currentLanguage = document.getElementById('currentLanguage');
const mobileCurrentLanguage = document.getElementById('mobileCurrentLanguage');

let currentLang = localStorage.getItem('preferredLanguage') || 'en';

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  // Initialize language
  applyTranslations(currentLang);
  
  // Set active nav link
  setActiveNavLink();
  
  // Initialize mobile menu
  initMobileMenu();
  
  // Initialize language toggle
  initLanguageToggle();
  
  // Initialize header scroll effect
  initHeaderScroll();
});

// Set active navigation link based on current page
function setActiveNavLink() {
  const currentPage = window.location.pathname.split('/').pop() || 'index.html';
  const navLinks = document.querySelectorAll('.nav-links a, .mobile-nav a');
  
  navLinks.forEach(link => {
    const href = link.getAttribute('href');
    if (href === currentPage || (currentPage === '' && href === 'index.html')) {
      link.classList.add('active');
    } else {
      link.classList.remove('active');
    }
  });
}

// Initialize mobile menu
function initMobileMenu() {
  if (mobileMenuBtn && mobileNav) {
    mobileMenuBtn.addEventListener('click', () => {
      mobileNav.classList.add('active');
      document.body.style.overflow = 'hidden';
    });
    
    mobileNavClose.addEventListener('click', () => {
      mobileNav.classList.remove('active');
      document.body.style.overflow = '';
    });
    
    // Close mobile nav when clicking a link
    document.querySelectorAll('.mobile-nav a').forEach(link => {
      link.addEventListener('click', () => {
        mobileNav.classList.remove('active');
        document.body.style.overflow = '';
      });
    });
  }
}

// Initialize header scroll effect
function initHeaderScroll() {
  const header = document.getElementById('header');
  if (header) {
    window.addEventListener('scroll', () => {
      if (window.scrollY > 100) {
        header.classList.add('scrolled');
      } else {
        header.classList.remove('scrolled');
      }
    });
  }
}

// Initialize language toggle
function initLanguageToggle() {
  if (languageBtn) {
    languageBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      languageDropdown.classList.toggle('active');
    });
  }
  
  if (mobileLanguageBtn) {
    mobileLanguageBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      mobileLanguageDropdown.classList.toggle('active');
    });
  }
  
  // Close dropdowns when clicking outside
  document.addEventListener('click', () => {
    languageDropdown.classList.remove('active');
    mobileLanguageDropdown.classList.remove('active');
  });
  
  // Language selection
  document.querySelectorAll('.language-option').forEach(option => {
    option.addEventListener('click', () => {
      const lang = option.getAttribute('data-lang');
      selectLanguage(lang);
    });
  });
}

// Language selection
function selectLanguage(lang) {
  currentLang = lang;
  
  // Update active state in dropdowns
  document.querySelectorAll('.language-option').forEach(option => {
    option.classList.remove('active');
    if (option.getAttribute('data-lang') === lang) {
      option.classList.add('active');
    }
  });
  
  // Update current language display
  if (currentLanguage) currentLanguage.textContent = lang === 'en' ? 'English' : 'Kiswahili';
  if (mobileCurrentLanguage) mobileCurrentLanguage.textContent = lang === 'en' ? 'English' : 'Kiswahili';
  
  // Apply translations
  applyTranslations(lang);
  
  // Save preference to localStorage
  localStorage.setItem('preferredLanguage', lang);
  
  // Close dropdowns
  languageDropdown.classList.remove('active');
  mobileLanguageDropdown.classList.remove('active');
}

// Apply translations to the page
function applyTranslations(lang) {
  const t = translations[lang];
  
  // Update all elements with data-translate attribute
  document.querySelectorAll('[data-translate]').forEach(element => {
    const key = element.getAttribute('data-translate');
    if (t[key]) {
      if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA' || element.tagName === 'SELECT') {
        element.placeholder = t[key];
      } else if (element.tagName === 'IMG' && element.hasAttribute('alt')) {
        element.alt = t[key];
      } else {
        element.innerHTML = t[key];
      }
    }
  });
  
  // Update page titles
  const pageTitle = document.title;
  if (pageTitle.includes('Home')) {
    document.title = lang === 'en' 
      ? "FirstLight Football Academy | Elite Youth Development | Dar es Salaam"
      : "FirstLight Football Academy | Ukuzaji wa Vijana Bora | Dar es Salaam";
  } else if (pageTitle.includes('About')) {
    document.title = lang === 'en'
      ? "About FirstLight Academy | Our Story & Values"
      : "Kuhusu FirstLight Academy | Hadithi Yetu & Maadili";
  } else if (pageTitle.includes('Programs')) {
    document.title = lang === 'en'
      ? "Training Programs | Age Groups & Development"
      : "Mipango ya Mafunzo | Makundi ya Umri & Ukuzaji";
  } else if (pageTitle.includes('Facilities')) {
    document.title = lang === 'en'
      ? "Our Facilities | Professional Training Environment"
      : "Vifaa Vyetu | Mazingira ya Kitaalamu ya Mafunzo";
  } else if (pageTitle.includes('Coaches')) {
    document.title = lang === 'en'
      ? "Our Coaching Team | Certified Professionals"
      : "Timu Yetu ya Makocha | Wataalamu Walioidhinishwa";
  } else if (pageTitle.includes('Schedule')) {
    document.title = lang === 'en'
      ? "Schedule & Pricing | Training Programs & Fees"
      : "Ratiba & Bei | Mipango ya Mafunzo & Ada";
  } else if (pageTitle.includes('Contact')) {
    document.title = lang === 'en'
      ? "Contact & Registration | Join FirstLight Academy"
      : "Mawasiliano & Usajili | Jiunge na FirstLight Academy";
  }
  
  // Update meta description
  const metaDescription = document.querySelector('meta[name="description"]');
  if (metaDescription) {
    metaDescription.content = lang === 'en'
      ? "Elite football academy in Dar es Salaam offering professional training for U6, U10, U14, U17 age groups. Modern facilities and certified coaches."
      : "Akademia ya hali ya juu ya mpira wa miguu Dar es Salaam inayotoa mafunzo ya kitaalamu kwa makundi ya umri ya U6, U10, U14, U17. Vifaa vya kisasa na makocha wenye cheti.";
  }
}

// Countdown Timer (for schedule page)
function initCountdown() {
  const countdownElement = document.getElementById('countdown');
  if (!countdownElement) return;
  
  function updateCountdown() {
    // Next Saturday 15:30
    const now = new Date();
    const day = now.getDay();
    const hours = now.getHours();
    const minutes = now.getMinutes();
    
    let nextTraining = new Date();
    
    if (day === 6 && (hours < 15 || (hours === 15 && minutes < 30))) {
      nextTraining.setHours(15, 30, 0, 0);
    } else if (day === 6 || day === 0) {
      const daysUntilNextSaturday = (6 - day + 7) % 7 || 7;
      nextTraining.setDate(now.getDate() + daysUntilNextSaturday);
      nextTraining.setHours(15, 30, 0, 0);
    } else {
      const daysUntilSaturday = 6 - day;
      nextTraining.setDate(now.getDate() + daysUntilSaturday);
      nextTraining.setHours(15, 30, 0, 0);
    }
    
    const diff = nextTraining - now;
    
    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
    const hoursRemaining = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutesRemaining = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
    const secondsRemaining = Math.floor((diff % (1000 * 60)) / 1000);
    
    countdownElement.innerHTML = `
      <div class="countdown-item">
        <div class="countdown-value">${days.toString().padStart(2, '0')}</div>
        <div class="countdown-label">${currentLang === 'en' ? 'Days' : 'Siku'}</div>
      </div>
      <div class="countdown-item">
        <div class="countdown-value">${hoursRemaining.toString().padStart(2, '0')}</div>
        <div class="countdown-label">${currentLang === 'en' ? 'Hours' : 'Saa'}</div>
      </div>
      <div class="countdown-item">
        <div class="countdown-value">${minutesRemaining.toString().padStart(2, '0')}</div>
        <div class="countdown-label">${currentLang === 'en' ? 'Minutes' : 'Dakika'}</div>
      </div>
      <div class="countdown-item">
        <div class="countdown-value">${secondsRemaining.toString().padStart(2, '0')}</div>
        <div class="countdown-label">${currentLang === 'en' ? 'Seconds' : 'Sekunde'}</div>
      </div>
    `;
  }
  
  updateCountdown();
  setInterval(updateCountdown, 1000);
}

// Form submission (for contact page)
function initContactForm() {
  const contactForm = document.getElementById('contactForm');
  if (!contactForm) return;
  
  contactForm.addEventListener('submit', function(e) {
    e.preventDefault();
    
    // Get form data
    const formData = new FormData(this);
    const data = Object.fromEntries(formData);
    
    // Create WhatsApp message
    const message = `${currentLang === 'en' ? 'New Registration:' : 'Usajili Mpya:'}\n\n` +
                   `${currentLang === 'en' ? 'Name:' : 'Jina:'} ${data.name}\n` +
                   `${currentLang === 'en' ? 'Phone:' : 'Simu:'} ${data.phone}\n` +
                   `${currentLang === 'en' ? 'Email:' : 'Barua pepe:'} ${data.email}\n` +
                   `${currentLang === 'en' ? 'Age Group:' : 'Kikundi cha Umri:'} ${data.ageGroup}\n` +
                   `${currentLang === 'en' ? 'Message:' : 'Ujumbe:'} ${data.message}`;
    
    // Encode message for WhatsApp
    const encodedMessage = encodeURIComponent(message);
    const whatsappUrl = `https://wa.me/255629384806?text=${encodedMessage}`;
    
    // Open WhatsApp
    window.open(whatsappUrl, '_blank');
    
    // Show success message
    alert(currentLang === 'en' 
      ? 'Thank you! You will be redirected to WhatsApp to complete your registration.'
      : 'Asante! Utaelekezwa kwenye WhatsApp kukamilisha usajili wako.'
    );
    
    // Reset form
    this.reset();
  });
}

// Gallery filter (for facilities page)
function initGalleryFilter() {
  const filterBtns = document.querySelectorAll('.filter-btn');
  const galleryItems = document.querySelectorAll('.gallery-item');
  
  if (filterBtns.length === 0 || galleryItems.length === 0) return;
  
  filterBtns.forEach(btn => {
    btn.addEventListener('click', () => {
      // Remove active class from all buttons
      filterBtns.forEach(b => b.classList.remove('active'));
      // Add active class to clicked button
      btn.classList.add('active');
      
      const filter = btn.getAttribute('data-filter');
      
      galleryItems.forEach(item => {
        if (filter === 'all' || item.getAttribute('data-category') === filter) {
          item.style.display = 'block';
        } else {
          item.style.display = 'none';
        }
      });
    });
  });
}

// Initialize all features
document.addEventListener('DOMContentLoaded', () => {
  initCountdown();
  initContactForm();
  initGalleryFilter();
});

// Smooth scrolling for anchor links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
  anchor.addEventListener('click', function(e) {
    e.preventDefault();
    
    const targetId = this.getAttribute('href');
    if (targetId === '#') return;
    
    const targetElement = document.querySelector(targetId);
    if (targetElement) {
      window.scrollTo({
        top: targetElement.offsetTop - 80,
        behavior: 'smooth'
      });
    }
  });
});
